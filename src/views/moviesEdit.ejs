<!DOCTYPE html>
<html lang="es">

<%- include('partials/head',{ title : 'Editar película' })%>

    <body>
        <%- include('partials/header')%>
        <main class="container">
            <div class="d-flex flex-direction:row flex-wrap">
                <div class="col-12 col-md-8 mx-auto mt-5">
                    <div class="card shadow">
            <h1 class="titulo">Película Editada: <%= movie.title %>
            </h1>
                <section class="formulario">
                    <div class="card-body d-flex justify-content-center flex-wrap">
                    <form action="/movies/update/<%= movie.id %>?_method=PUT" method="POST" enctype="multipart/form-data">

                        <div class="col-12 col-md-6 mb-3">
                        <label class="form-label" for="title">Title </label>
                        <p><input class="form-control w-auto" type="text" name="title" id="" value="<%= movie.title %>">
                        </p>
                        </div>

                        <div class="col-12 col-md-6 mb-3">

                            <label class="form-label" for="rating">Rating </label>
                            <p><input class="form-control w-auto" type="number" name="rating" id=""
                                    value="<%= movie.rating %>"></p>
                        </div>


                        <div class="col-12 col-md-6 mb-3">

                            <label class="form-label" for="awards">Awards </label>
                            <p><input class="form-control w-auto" type="number" name="awards" id=""
                                    value="<%= movie.awards %>"></p>
                        </div>


                        <div class="col-12 col-md-6 mb-3">

                            <label class="form-label" for="release_date">Release date </label>
                            <p><input class="form-control w-auto" type="date" name="release_date" id=""
                                    value="<%= moment(movie.release_date).format('YYYY-MM-DD') %>"></p>
                        </div>

                       

                        <div class="col-12 col-md-6 mb-3">

                            <label class="form-label" for="length">Length </label>
                            <p><input class="form-control w-auto" type="number" name="length" id=""
                                    value="<%= movie.length %>"></p>
                        </div>

                        <div class="col-12 col-md-6 mb-3">

                            <label class="form-label" for="genre_id">Genre </label>
                            <p>
                                <select class="form-control w-auto" name="genre_id" id="" required>
                                    <% genres.forEach(genre=> { %>
                                        <option value="<%= genre.id %>" <% if (movie.genre_id==genre.id) { %>
                                            <%= 'selected' %>
                                                <% }; %>><%= genre.name %>
                                        </option>
                                        <% }); %>
                                </select>
                            </p>
                        </div>
                        <div class="col-12 d-flex justify-content-center gap-2 mb-3">
                            <label for="image" class="btn btn-primary">Agregar una imagen</label>
                            <input type="file" name="image" id="image" hidden />
                            
                          </div>
                    
            </div>
            
            <h5 class="form-label mb-2">Actores</h5>
            <div class="actors__list">
                <% actors.forEach(actor=> { %>
                    <div class="col-12 col-md-3 col-lg-2">
                        <div class="form-check">
                            <input name="actors" class="form-check-input" type="checkbox" <%= movie.actors.map(actor=>actor.id).includes(actor.id) && 'checked' %> value="<%= actor.id %>"
                                id="actor<%= actor.id %>">
                            <label class="form-check-label" for="flexCheckDefault">
                                <%= actor.first_name %>
                                    <%= actor.last_name %>
                            </label>
                        </div>
                    </div>
                    <% }) %>
            </div>
        

            <!--
            <label for="genre_id">Genre ID </label>
            <p><input type="number" name="genre_id" id="" value="<%= movie.genre_id %>"></p>
        -->

            <br>
            </div>

            <div class="d-flex justify-content-end">
                <p> <button class="botonAgregar" type="submit">Actualizar</button>
    
                    <a class="botonVolver" href="/movies">Listado de Películas</a>
                </p>
            </div>
        </div>
            </form>

            </section>
            </div>
        </div>
    </div>
        </main>
    </body>

</html>